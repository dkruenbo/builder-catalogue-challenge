{% extends "base.html" %}

{% block content %}
<div class="search-form">
    <h2>Analyze Your Collection</h2>
    <form method="post" action="/analyze">
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" placeholder="Enter your username (e.g., arts-n-bricks)" required>
        </div>
        {% if users %}
        <div class="form-group">
            <label for="user-select">Or choose from available users:</label>
            <select id="user-select" onchange="fillFromDropdown()" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 4px; font-size: 16px; box-sizing: border-box; background: white;">
                <option value="">Select a user...</option>
                {% for user in users %}
                <option value="{{ user.username }}">{{ user.username }}</option>
                {% endfor %}
            </select>
        </div>
        {% endif %}
        <button type="submit">Analyze Collection</button>
    </form>
</div>

{% if error %}
<div class="error">
    <strong>Error:</strong> {{ error }}
</div>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
function fillUsername(username) {
    document.getElementById('username').value = username;
}

function fillFromDropdown() {
    const dropdown = document.getElementById('user-select');
    const username = dropdown.value;
    if (username) {
        document.getElementById('username').value = username;
    }
}
</script>
{% endblock %}